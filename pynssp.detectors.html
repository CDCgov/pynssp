<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pynssp.detectors package &mdash; pynssp 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ChangeLogs" href="history.html" />
    <link rel="prev" title="pynssp.core package" href="pynssp.core.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pynssp
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">About pynssp</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Get started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">pynssp</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pynssp.html">pynssp package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pynssp.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pynssp.core.html">pynssp.core package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">pynssp.detectors package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pynssp.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pynssp.html#module-pynssp.data">pynssp.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pynssp.html#module-pynssp.pynssp">pynssp.pynssp module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pynssp.html#module-pynssp.utils">pynssp.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pynssp.html#module-pynssp">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="history.html">ChangeLogs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="codeofconduct.html">Creating a Culture of Innovation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pynssp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">pynssp</a></li>
          <li class="breadcrumb-item"><a href="pynssp.html">pynssp package</a></li>
      <li class="breadcrumb-item active">pynssp.detectors package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/cdcgov/pynssp/blob/master/docs/pynssp.detectors.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pynssp-detectors-package">
<h1>pynssp.detectors package<a class="headerlink" href="#pynssp-detectors-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-pynssp.detectors.ewma">
<span id="pynssp-detectors-ewma-module"></span><h2>pynssp.detectors.ewma module<a class="headerlink" href="#module-pynssp.detectors.ewma" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.ewma.alert_ewma">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.ewma.</span></span><span class="sig-name descname"><span class="pre">alert_ewma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">28</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/ewma.html#alert_ewma"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.ewma.alert_ewma" title="Permalink to this definition"></a></dt>
<dd><p>Exponentially Weighted Moving Average (EWMA)</p>
<p>The EWMA compares a weighted average of the most recent visit counts
to a baseline expectation. For the weighted average to be tested, an exponential
weighting gives the most influence to the most recent observations.
This algorithm is appropriate for daily counts that do not have the
characteristic features modeled in the regression algorithm. It is more applicable
for Emergency Department data from certain hospital groups and for time series with
small counts (daily average below 10) because of the limited case definition or
chosen geographic region. An alert (red value) is signaled if the statistical test
(student”s t-test) applied to the test statistic yields a p-value less than 0.01.
If the p-value is greater than or equal to 0.01 and strictly less than 0.05, a warning
(yellow value) is signaled. Blue values are returned if an alert or warning does not
occur. Grey values represent instances where anomaly detection did not apply
(i.e., observations for which baseline data were unavailable).</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame containing time series data</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates (Default value = “date”)</p></li>
<li><p><strong>y</strong> – Name of the column of type Numeric containing counts or percentages (Default value = “count”)</p></li>
<li><p><strong>B</strong> – Baseline parameter. The baseline length is the number of days used to
calculate rolling averages, standard deviations, and exponentially weighted
moving averages. Defaults to 28 days to match ESSENCE implementation.</p></li>
<li><p><strong>g</strong> – Guardband parameter. The guardband length is the number of days separating
the baseline from the current test date. Defaults to 2 days to match ESSENCE
implementation.</p></li>
<li><p><strong>w1</strong> – Smoothing coefficient for sensitivity to gradual events. Must be between
0 and 1 and is recommended to be between 0.3 and 0.5 to account for gradual
effects. Defaults to 0.4 to match ESSENCE implementation.</p></li>
<li><p><strong>w2</strong> – Smoothed coefficient for sensitivity to sudden events. Must be between
0 and 1 and is recommended to be above 0.7 to account for sudden events.
Defaults to 0.9 to match ESSENCE implementation and approximate the C2 algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original pandas data frame with detection results.</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>import pandas as pd</p>
<p>import numpy as np</p>
<p>from pynssp.detectors.ewma import *</p>
<dl class="simple">
<dt>df = pd.DataFrame({</dt><dd><p>“date”: pd.date_range(“2020-01-01”, “2020-12-31”),
“count”: np.random.randint(0, 101, size=366)</p>
</dd>
</dl>
<p>})</p>
<p>df_ewma = alert_ewma(df)</p>
<p>df_ewma.head()</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.ewma.ewma_loop">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.ewma.</span></span><span class="sig-name descname"><span class="pre">ewma_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/ewma.html#ewma_loop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.ewma.ewma_loop" title="Permalink to this definition"></a></dt>
<dd><p>Loop for EWMA</p>
<p>Loop for EWMA and adjustment of outlying smoothed values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates</p></li>
<li><p><strong>y</strong> – Name of the column containing the response variable data</p></li>
<li><p><strong>mu</strong> – Numeric vector of baseline averages</p></li>
<li><p><strong>B</strong> – Baseline parameter. The baseline length is the number of days used to
calculate rolling averages, standard deviations, and exponentially weighted
moving averages. Defaults to 28 days to match NSSP-ESSENCE implementation.</p></li>
<li><p><strong>g</strong> – Guardband parameter. The guardband length is the number of days separating
the baseline from the current test date. Defaults to 2 days to match NSSP-ESSENCE
implementation.</p></li>
<li><p><strong>w1</strong> – Smoothing coefficient for sensitivity to gradual events. Must be between
0 and 1 and is recommended to be between 0.3 and 0.5 to account for gradual
effects. Defaults to 0.4 to match NSSP-ESSENCE implementation.</p></li>
<li><p><strong>w2</strong> – Smoothed coefficient for sensitivity to sudden events. Must be between
0 and 1 and is recommended to be above 0.7 to account for sudden events.
Defaults to 0.9 to match NSSP-ESSENCE implementation and approximate the C2 algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pandas data frame with p-values and test statistics</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pynssp.detectors.farrington">
<span id="pynssp-detectors-farrington-module"></span><h2>pynssp.detectors.farrington module<a class="headerlink" href="#module-pynssp.detectors.farrington" title="Permalink to this heading"></a></h2>
</section>
<section id="module-pynssp.detectors.nbinom">
<span id="pynssp-detectors-nbinom-module"></span><h2>pynssp.detectors.nbinom module<a class="headerlink" href="#module-pynssp.detectors.nbinom" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.nbinom.alert_nbinom">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.nbinom.</span></span><span class="sig-name descname"><span class="pre">alert_nbinom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/nbinom.html#alert_nbinom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.nbinom.alert_nbinom" title="Permalink to this definition"></a></dt>
<dd><p>Negative binomial detection algorithm for weekly counts</p>
<p>The negative binomial regression algorithm fits a negative binomial regression
model with a time term and order 1 Fourier terms to a baseline period that
spans 2 or more years. Inclusion of Fourier terms in the model is intended
to account for seasonality common in multi-year weekly time series of counts.
Order 1 sine and cosine terms are included to account for annual seasonality
that is common to syndromes and diseases such as influenza, RSV, and norovirus.
Each baseline model is used to make weekly forecasts for all weeks following
the baseline period. One-sided upper 95% prediction interval bounds are
computed for each week in the prediction period. Alarms are signaled for
any week during for which weekly counts fall above the upper bound of
the prediction interval.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame containing time series data</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates (Default value = “date”)</p></li>
<li><p><strong>y</strong> – Name of the column of type Numeric containing counts or percentages (Default value = “count”)</p></li>
<li><p><strong>baseline_end</strong> – date of the end of the baseline/training period (in date or string class)</p></li>
<li><p><strong>include_time</strong> – Indicate whether or not to include time term in regression model (default is True)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original pandas dataframe with model estimates, upper prediction interval bounds,
a binary alarm indicator field, and a binary indicator field of
whether or not a time term was included.</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>import pandas as pd</p>
<p>import numpy as np</p>
<dl class="simple">
<dt>df = pd.DataFrame({</dt><dd><p>“date”: pd.date_range(start=”2014-01-05”, end=”2022-02-05”, freq=”W”),
“count”: np.random.poisson(lam=25, size=(len(pd.date_range(start=”2014-01-05”, end=”2022-02-05”, freq=”W”)),))</p>
</dd>
</dl>
<p>})</p>
<p>df_nbinom = alert_nbinom(df, baseline_end = “2020-03-01”)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.nbinom.nb_model">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.nbinom.</span></span><span class="sig-name descname"><span class="pre">nb_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/nbinom.html#nb_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.nbinom.nb_model" title="Permalink to this definition"></a></dt>
<dd><p>Negative binomial regression model for weekly counts</p>
<p>Negative binomial model helper function for monitoring weekly
count time series with seasonality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates</p></li>
<li><p><strong>y</strong> – Name of the column of type Numeric containing counts</p></li>
<li><p><strong>baseline_end</strong> – Object of type Date defining the end of the baseline/training period</p></li>
<li><p><strong>include_time</strong> – Logical indicating whether or not to include time term in regression model</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pandas data frame.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pynssp.detectors.regression">
<span id="pynssp-detectors-regression-module"></span><h2>pynssp.detectors.regression module<a class="headerlink" href="#module-pynssp.detectors.regression" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.regression.adaptive_regression">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.regression.</span></span><span class="sig-name descname"><span class="pre">adaptive_regression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/regression.html#adaptive_regression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.regression.adaptive_regression" title="Permalink to this definition"></a></dt>
<dd><p>Adaptive Regression</p>
<p>Adaptive Regression helper function for Adaptive Multiple Regression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame containing time series data</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates</p></li>
<li><p><strong>y</strong> – Name of the column containing the response variable data</p></li>
<li><p><strong>B</strong> – Baseline parameter. The baseline length is the number of days to
which each liner model is fit.</p></li>
<li><p><strong>g</strong> – Guardband parameter. The guardband length is the number of days
separating the baseline from the current date in consideration for alerting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pandas data frame with p-values and test statistics</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.regression.alert_regression">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.regression.</span></span><span class="sig-name descname"><span class="pre">alert_regression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">28</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/regression.html#alert_regression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.regression.alert_regression" title="Permalink to this definition"></a></dt>
<dd><p>Adaptive Multiple Regression</p>
<p>The adaptive multiple regression algorithm fits a linear model to a baseline
of counts or percentages of length B, and forecasts a predicted value g + 1
days later (guard-band). This value is compared to the current observed value
and divided by the standard error of prediction in the test-statistic.
The model includes terms to account for linear trends and day-of-week effects.
Note that this implementation does NOT account for federal holidays as in the
Regression 1.2 algorithm in ESSENCE. An alert (red value) is signaled if
the statistical test (student”s t-test) applied to the test statistic yields
a p-value less than 0.01. If the p-value is greater than or equal to 0.01
and strictly less than 0.05, a warning (yellow value) is signaled.
Blue values are returned if an alert or warning does not occur.
Grey values represent instances where anomaly detection did not apply
(i.e., observations for which baseline data were unavailable).</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame containing time series data</p></li>
<li><p><strong>t</strong> – The name of the column in df that contains the dates or times of
observations. Defaults to “date”.</p></li>
<li><p><strong>y</strong> – The name of the column in df that contains the values of the
time series. Defaults to “count”.</p></li>
<li><p><strong>B</strong> – The length of the baseline period (in days). Must be a multiple
of 7 and at least 7. Defaults to 28.</p></li>
<li><p><strong>g</strong> – The length of the guard band (in days). Must be non-negative.
Defaults to 2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original pandas data frame with detection results.</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>import pandas as pd</p>
<p>import numpy as np</p>
<p>from pynssp.detectors.regression import *</p>
<dl class="simple">
<dt>df = pd.DataFrame({</dt><dd><p>“date”: pd.date_range(“2020-01-01”, “2020-12-31”),
“count”: np.random.randint(0, 101, size=366)</p>
</dd>
</dl>
<p>})</p>
<p>df_regression = alert_regression(df)</p>
<p>df_regression.head()</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pynssp.detectors.serfling">
<span id="pynssp-detectors-serfling-module"></span><h2>pynssp.detectors.serfling module<a class="headerlink" href="#module-pynssp.detectors.serfling" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.serfling.alert_serfling">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.serfling.</span></span><span class="sig-name descname"><span class="pre">alert_serfling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/serfling.html#alert_serfling"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.serfling.alert_serfling" title="Permalink to this definition"></a></dt>
<dd><p>Original Serfling method for weekly time series</p>
<p>The original Serfling algorithm fits a linear regression model with
a time term and order 1 Fourier terms to a baseline period that ideally spans
5 or more years. Inclusion of Fourier terms in the model is intended to
account for seasonality common in multi-year weekly time series. Order 1 sine
and cosine terms are included to account for annual seasonality that is
common to syndromes and diseases such as influenza, RSV, and norovirus. Each
baseline model is used to make weekly forecasts for all weeks following the
baseline period. One-sided upper 95% prediction interval bounds are computed
for each week in the prediction period. Alarms are signaled for any week
during for which weekly observations fall above the upper bound of the
prediction interval. This implementation follows the approach of the original
Serfling method in which weeks between October of the starting year of a
season and May of the ending year of a season are considered to be in the
epidemic period. Weeks in the epidemic period are removed from the baseline
prior to fitting the regression model.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame containing time series data</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates (Default value = “date”)</p></li>
<li><p><strong>y</strong> – Name of the column of type Numeric containing counts or percentages (Default value = “count”)</p></li>
<li><p><strong>baseline_end</strong> – date of the end of the baseline/training period (in date or string class)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original pandas dataframe with model estimates, upper prediction interval bounds,
a binary alarm indicator field, and a binary indicator</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>import pandas as pd</p>
<p>import numpy as np</p>
<dl class="simple">
<dt>df = pd.DataFrame({</dt><dd><p>“date”: pd.date_range(start=”2014-01-05”, end=”2022-02-05”, freq=”W”),
“count”: np.random.poisson(lam=25, size=(len(pd.date_range(start=”2014-01-05”, end=”2022-02-05”, freq=”W”)),))</p>
</dd>
</dl>
<p>})</p>
<p>df_serfling  = alert_serfling(df, baseline_end = “2020-03-01”)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.serfling.serfling_model">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.serfling.</span></span><span class="sig-name descname"><span class="pre">serfling_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_end</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/serfling.html#serfling_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.serfling.serfling_model" title="Permalink to this definition"></a></dt>
<dd><p>Original Serfling method for weekly time series</p>
<p>Serfling model helper function for monitoring weekly time series with seasonality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A pandas data frame</p></li>
<li><p><strong>t</strong> – Name of the column of type Date containing the dates</p></li>
<li><p><strong>y</strong> – Name of the column of type Numeric containing counts</p></li>
<li><p><strong>baseline_end</strong> – date of the end of the baseline/training period (date or string class)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pandas data frame.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pynssp.detectors.switch">
<span id="pynssp-detectors-switch-module"></span><h2>pynssp.detectors.switch module<a class="headerlink" href="#module-pynssp.detectors.switch" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynssp.detectors.switch.alert_switch">
<span class="sig-prename descclassname"><span class="pre">pynssp.detectors.switch.</span></span><span class="sig-name descname"><span class="pre">alert_switch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">28</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">g</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynssp/detectors/switch.html#alert_switch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynssp.detectors.switch.alert_switch" title="Permalink to this definition"></a></dt>
<dd><p>Regression/EWMA Switch</p>
<p>The NSSP-ESSENCE Regression/EWMA Switch algorithm generalized the Regression and
EWMA algorithms by applying the most appropriate algorithm for the data in the
baseline. First, multiple adaptive regression is applied where the adjusted R
squared value of the model is examined to see if it meets a threshold of 0.60. If
this threshold is not met, then the model is considered to not explain the data well.
In this case, the algorithm switches to the EWMA algorithm, which is more appropriate
for sparser time series that are common with county level trends. The smoothing
coefficient for the EWMA algorithm is fixed to 0.4.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – A dataframe containing the time series data.</p></li>
<li><p><strong>t</strong> – The name of the column in <cite>df</cite> containing the time information.
Defaults to “date”.</p></li>
<li><p><strong>y</strong> – The name of the column in <cite>df</cite> containing the values to be analyzed.
Defaults to “count”.</p></li>
<li><p><strong>B</strong> – The length of the baseline period in days, must be a multiple of 7 and
greater than or equal to 7. Defaults to 28.</p></li>
<li><p><strong>g</strong> – The length of the guardband period in days. Must be non-negative.
Defaults to 2.</p></li>
<li><p><strong>w1</strong> – Smoothing coefficient for sensitivity to gradual events. Must be between
0 and 1 and is recommended to be between 0.3 and 0.5 to account for gradual
effects. Defaults to 0.4 to match NSSP-ESSENCE implementation.</p></li>
<li><p><strong>w2</strong> – Smoothed coefficient for sensitivity to sudden events. Must be between
0 and 1 and is recommended to be above 0.7 to account for sudden events.
Defaults to 0.9 to match NSSP-ESSENCE implementation and approximate the C2 algorithm.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dataframe containing the results of the analysis.</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>import pandas as pd</p>
<p>import numpy as np</p>
<p>from pynssp.detectors.switch import *</p>
<dl class="simple">
<dt>df = pd.DataFrame({</dt><dd><p>“date”: pd.date_range(“2020-01-01”, “2020-12-31”),
“count”: np.random.randint(0, 101, size=366)</p>
</dd>
</dl>
<p>})</p>
<p>df_switch = alert_switch(df)</p>
<p>df_switch.head()</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pynssp.detectors.trend">
<span id="pynssp-detectors-trend-module"></span><h2>pynssp.detectors.trend module<a class="headerlink" href="#module-pynssp.detectors.trend" title="Permalink to this heading"></a></h2>
</section>
<section id="module-pynssp.detectors">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pynssp.detectors" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pynssp.core.html" class="btn btn-neutral float-left" title="pynssp.core package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="history.html" class="btn btn-neutral float-right" title="ChangeLogs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Gbedegnon Roseric Azondekon.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5FTLT9PCW7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-5FTLT9PCW7', {
          'anonymize_ip': false,
      });
    </script>
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
      <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Read the Docs</span>
        v: latest
        <span class="fa fa-caret-down"></span>
      </span>
      <div class="rst-other-versions">
        <dl>
          <dt>Versions</dt>
            <dd><a href="#">latest</a></dd>
            <dd><a href="#">0.1.0</a></dd>
            <!-- <dd><a href="#">1.1</a></dd> -->
        </dl>
        <dl>
          <dt>Downloads</dt>
          <dd><a href="https://raw.githubusercontent.com/cdcgov/pynssp/master/docs/pynssp.pdf">PDF</a></dd>
          <dd><a href="#">ePub</a></dd>
          <!-- <dd><a href="#">HTML</a></dd> -->
        </dl>
        <dl>
          <dt>On this Documentation</dt>
            <dd>
              <a href="https://github.com/CDCgov/pynssp/tree/master/docs">doc source</a>
            </dd>
            <dd>
              <a href="https://github.com/CDCgov/pynssp/tree/gh-pages">build source</a>
            </dd>
        </dl>
        <!-- <dl>
          <dt>Debug</dt>
          <dd><a href="#" data-toggle="rst-debug-badge">Swap badge position</a></dd>
        </dl> -->
      </div>
    </div>

</body>
</html>